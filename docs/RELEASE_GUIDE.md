# GitLab Flow Release æµç¨‹æŒ‡å—

## ğŸš€ å®Œæ•´å‘å¸ƒæµç¨‹

### æ­¥éª¤ 0: æ·»åŠ å˜æ›´è®°å½•ï¼ˆå¼€å‘æ—¶ï¼‰
```bash
# æ·»åŠ å˜æ›´è®°å½•
pnpm changeset

# é€‰æ‹©ï¼š
# 1. å“ªäº›åŒ…æœ‰å˜æ›´
# 2. ç‰ˆæœ¬ç±»å‹ï¼ˆmajor/minor/patchï¼‰
# 3. è¾“å…¥å˜æ›´æè¿°
```

### æ­¥éª¤ 1: å¼€å§‹æ–°ç‰ˆæœ¬
1. è¿›å…¥ GitHub Actions é¡µé¢
2. é€‰æ‹© "Start Release" workflow
3. ç‚¹å‡» "Run workflow"
4. å¯é€‰ï¼šè¾“å…¥è‡ªå®šä¹‰ç‰ˆæœ¬å·ï¼ˆç•™ç©ºåˆ™æ ¹æ® changesets è‡ªåŠ¨è®¡ç®—ï¼‰
5. ç‚¹å‡»è¿è¡Œ

è¿™ä¼šè‡ªåŠ¨ï¼š
- åˆ›å»º `release/1.10.0` åˆ†æ”¯
- æ›´æ–°æ‰€æœ‰åŒ…ç‰ˆæœ¬å·
- åˆ›å»º PR åˆ° main

### æ­¥éª¤ 2: å‡†å¤‡å‘å¸ƒ
1. åœ¨ PR ä¸­æ·»åŠ  release notes
2. è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡
3. Review ä»£ç å˜æ›´
4. åˆå¹¶ PR åˆ° main

### æ­¥éª¤ 3: åˆ›å»º Tag è§¦å‘å‘å¸ƒ
```bash
git checkout main
git pull origin main
git tag v1.10.0
git push origin v1.10.0
```

è¿™ä¼šè‡ªåŠ¨è§¦å‘ï¼š
- å‘å¸ƒæ‰€æœ‰åŒ…åˆ° npm
- æ„å»º Desktop åº”ç”¨ï¼ˆMac/Win/Linuxï¼‰
- åˆ›å»º GitHub Release
- ä¸Šä¼ æ‰€æœ‰æ„å»ºäº§ç‰©

## ğŸ”¥ Hotfix æµç¨‹

### å½“éœ€è¦ç´§æ€¥ä¿®å¤æ—¶ï¼š
1. è¿›å…¥ "Hotfix" workflow
2. è¾“å…¥ hotfix ç‰ˆæœ¬ï¼ˆå¦‚ `1.9.1`ï¼‰
3. è¾“å…¥åŸºç¡€ tagï¼ˆå¦‚ `v1.9.0`ï¼‰
4. è¿è¡Œ workflow

### ä¿®å¤åï¼š
1. åœ¨ hotfix åˆ†æ”¯ä¸Šä¿®å¤é—®é¢˜
2. åˆå¹¶ PR åˆ° main
3. åˆ›å»ºæ–° tagï¼š
```bash
git tag v1.9.1
git push origin v1.9.1
```

## ğŸ“‹ ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª Semantic Versioningï¼š
- **Major** (x.0.0): ä¸å…¼å®¹çš„ API å˜æ›´
- **Minor** (1.x.0): æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- **Patch** (1.9.x): Bug ä¿®å¤ï¼Œå‘åå…¼å®¹

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦ç›´æ¥åœ¨ main åˆ†æ”¯æ“ä½œ**
2. **æ‰€æœ‰å‘å¸ƒå¿…é¡»é€šè¿‡ release åˆ†æ”¯**
3. **Tag å¿…é¡»ä»¥ `v` å¼€å¤´**ï¼ˆå¦‚ `v1.10.0`ï¼‰
4. **å‘å¸ƒå‰ç¡®ä¿è®¾ç½®äº† NPM_TOKEN secret**

## ğŸ” éœ€è¦çš„ Secrets

åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ï¼š
- `PAT_TOKEN`: GitHub Personal Access Tokenï¼ˆå·²é…ç½®ï¼‰
- `NPM_TOKEN`: npm å‘å¸ƒ tokenï¼ˆéœ€è¦æ·»åŠ ï¼‰
- `ORG_NPM_TOKEN`: ç»„ç»‡çº§ npm tokenï¼ˆå·²é…ç½®ï¼‰

## ğŸ¯ å¿«é€Ÿå‘½ä»¤

### æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
```bash
cat package.json | grep version
```

### æŸ¥çœ‹æœ€æ–° tag
```bash
git describe --tags --abbrev=0
```

### æŸ¥çœ‹æ‰€æœ‰ release åˆ†æ”¯
```bash
git branch -r | grep release/
```

## ğŸ“Š å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®è®¤ï¼š
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] CHANGELOG å·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·æ­£ç¡®
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] Breaking changes å·²æ ‡æ³¨

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: å‘å¸ƒå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ Actions æ—¥å¿—ï¼Œä¿®å¤é—®é¢˜åé‡æ–° tag

### Q: å¦‚ä½•æ’¤é”€å‘å¸ƒï¼Ÿ
A: 
1. åˆ é™¤ tag: `git push --delete origin v1.10.0`
2. npm unpublishï¼ˆ24å°æ—¶å†…ï¼‰
3. åˆ é™¤ GitHub Release

### Q: å¦‚ä½•å‘å¸ƒé¢„å‘å¸ƒç‰ˆæœ¬ï¼Ÿ
A: ä½¿ç”¨å¸¦é¢„å‘å¸ƒæ ‡è¯†çš„ç‰ˆæœ¬å·ï¼Œå¦‚ `1.10.0-beta.1`