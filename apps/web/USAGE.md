# PromptX Web UI 使用指南

## 快速开始

### 1. 启动 PromptX 服务

首先确保 PromptX MCP 服务器正在运行。有三种方式：

**方式 1: 使用桌面应用（推荐）**
```bash
# 下载并运行 PromptX Desktop
# 服务会自动在后台运行在 http://127.0.0.1:5203
```

**方式 2: 使用 CLI**
```bash
npx @promptx/mcp-server
```

**方式 3: 使用 Docker**
```bash
docker run -d -p 5203:5203 deepracticexs/promptx:latest
```

### 2. 启动 Web UI

**开发模式：**
```bash
cd apps/web
npm install
npm run dev
```

访问 http://localhost:3000

**生产模式：**
```bash
cd apps/web
npm run build
# 使用任何静态文件服务器托管 dist 目录
```

## 主要功能

### 🏠 首页（Home）
- 查看系统概览和统计数据
- 快速了解可用的角色和工具数量
- 获取快速入门指南

### 🎭 角色管理（Roles）
- **浏览角色**：查看所有可用的 AI 专家角色
- **搜索功能**：按名称或描述搜索角色
- **筛选功能**：按来源筛选（系统/项目/用户）
- **激活角色**：一键激活角色以使用其专业能力

角色来源说明：
- 📦 **系统角色**：PromptX 内置的通用专家（如 Nuwa、Luban、Writer）
- 🏗️ **项目角色**：项目特定的角色（需先绑定项目）
- 👤 **用户角色**：用户自定义创建的角色

### 🔧 工具浏览（Tools）
- **查看工具**：浏览所有可用的功能工具
- **工具详情**：查看工具参数和使用说明
- **搜索工具**：快速找到需要的工具

核心工具：
- `discover`: 发现可用的角色和工具
- `action`: 激活指定角色
- `recall`: 回忆记忆网络中的知识
- `remember`: 存储新的记忆
- `project`: 绑定项目目录
- `toolx`: 工具管理和执行

### 📁 项目管理（Projects）
- **绑定项目**：输入项目路径绑定到 PromptX
- **查看活跃项目**：显示当前绑定的项目信息
- **访问项目资源**：绑定后可使用项目特定的角色和工具

绑定项目后的好处：
1. 访问项目的 `.promptx/resource` 目录中的自定义资源
2. AI 获取项目结构和约定的上下文
3. 使用项目特定的工作流和自动化

### 🧠 记忆网络（Memory）
- **存储记忆**：用关键词保存知识点
- **回忆记忆**：通过关键词搜索相关记忆
- **记忆网络**：构建知识网络，AI 使用记忆提供上下文响应

工作原理：
1. 使用关键词标记记忆便于检索
2. 使用多个关键词查找相关记忆
3. 记忆随时间构建知识网络
4. AI 利用记忆提供更准确的上下文回答

## 界面导航

### 侧边栏
- 点击菜单图标可展开/折叠侧边栏
- 当前激活的角色会显示在侧边栏底部
- 绿色脉动指示灯表示角色处于激活状态

### 页面布局
- 响应式设计，适配桌面和移动设备
- 清晰的视觉层次，易于浏览
- 悬浮提示和状态指示

## 常见使用场景

### 场景 1: 激活专家角色
1. 进入 **Roles** 页面
2. 使用搜索或筛选找到需要的角色
3. 点击 **Activate Role** 按钮
4. 侧边栏显示该角色已激活
5. 在你的 AI 应用中使用该角色的能力

### 场景 2: 绑定项目使用项目资源
1. 进入 **Projects** 页面
2. 输入项目的绝对路径
3. 点击 **Bind Project**
4. 返回 **Roles** 或 **Tools** 页面查看新增的项目资源

### 场景 3: 构建知识网络
1. 进入 **Memory** 页面
2. 在右侧表单输入要记住的内容
3. 添加相关关键词（用逗号分隔）
4. 点击 **Remember** 保存
5. 稍后可用关键词搜索回忆

### 场景 4: 探索可用工具
1. 进入 **Tools** 页面
2. 浏览所有可用工具
3. 查看工具的参数定义
4. 在你的工作流中使用这些工具

## 技术细节

### API 连接
Web UI 通过 HTTP 连接到 PromptX MCP 服务器：
- **默认地址**：`http://127.0.0.1:5203/mcp`
- **协议**：JSON-RPC 2.0
- **请求方式**：POST

### 代理配置
开发模式下，Vite 配置了代理：
- `/api/*` → `http://127.0.0.1:5203/*`

### 状态管理
- **Zustand**：全局状态（活跃角色、项目、UI 状态）
- **React Query**：服务器数据缓存和同步

## 故障排查

### Web UI 无法连接到服务器
1. 确认 PromptX 服务正在运行：`curl http://127.0.0.1:5203/mcp`
2. 检查防火墙设置
3. 查看浏览器控制台的错误信息

### 角色列表为空
1. 确认服务器正常运行
2. 检查 `~/.promptx/` 目录是否存在
3. 尝试重启 PromptX 服务

### 项目资源未显示
1. 确认已成功绑定项目
2. 检查项目目录下是否有 `.promptx/resource/` 目录
3. 确认资源文件格式正确

## 桌面应用集成

### 在桌面应用中使用
1. 启动 PromptX Desktop
2. 点击系统托盘图标
3. 选择 **Open Web UI**
4. Web UI 会在新窗口中打开

### 开发调试
开发模式下，桌面应用会加载 `http://localhost:3000`：
```bash
# Terminal 1: 启动 Web UI
cd apps/web
npm run dev

# Terminal 2: 启动桌面应用
cd apps/desktop
npm run dev
```

## 下一步

- 探索系统内置的专家角色（Nuwa、Luban、Writer）
- 创建自己的自定义角色
- 构建项目特定的工具
- 使用记忆系统让 AI 记住重要上下文

## 反馈与支持

- GitHub Issues: https://github.com/Deepractice/PromptX/issues
- Discord: https://discord.gg/U9qQCNB4bE
- 文档: https://docs.deepractice.ai