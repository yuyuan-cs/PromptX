/**
 * MCP å·¥å…·å®šä¹‰ - å…±äº«é…ç½®
 * ç»Ÿä¸€ç®¡ç†æ‰€æœ‰MCPå·¥å…·çš„æè¿°å’ŒSchemaå®šä¹‰ï¼Œé¿å…é‡å¤ç»´æŠ¤
 */

/**
 * å·¥å…·å®šä¹‰é…ç½®
 */
const TOOL_DEFINITIONS = [
  {
    name: 'promptx_init',
    description: 'ðŸŽ¯ [AIä¸“ä¸šèƒ½åŠ›å¯åŠ¨å™¨] âš¡ è®©ä½ çž¬é—´æ‹¥æœ‰ä»»ä½•é¢†åŸŸçš„ä¸“å®¶çº§æ€ç»´å’ŒæŠ€èƒ½ - ä¸€é”®æ¿€æ´»ä¸°å¯Œçš„ä¸“ä¸šè§’è‰²åº“(äº§å“ç»ç†/å¼€å‘è€…/è®¾è®¡å¸ˆ/è¥é”€ä¸“å®¶ç­‰)ï¼ŒèŽ·å¾—è·¨å¯¹è¯è®°å¿†èƒ½åŠ›ï¼Œ30ç§’å†…ä»Žæ™®é€šAIå˜èº«è¡Œä¸šä¸“å®¶ã€‚**å¤šé¡¹ç›®æ”¯æŒ**ï¼šçŽ°åœ¨æ”¯æŒå¤šä¸ªIDE/é¡¹ç›®åŒæ—¶ä½¿ç”¨ï¼Œé¡¹ç›®é—´å®Œå…¨éš”ç¦»ã€‚**å¿…é¡»ä½¿ç”¨åœºæ™¯**ï¼š1ï¸âƒ£ç³»ç»Ÿé¦–æ¬¡ä½¿ç”¨æ—¶ï¼›2ï¸âƒ£åˆ›å»ºæ–°è§’è‰²åŽåˆ·æ–°æ³¨å†Œè¡¨ï¼›3ï¸âƒ£è§’è‰²æ¿€æ´»(action)å‡ºé”™æ—¶é‡æ–°å‘çŽ°è§’è‰²ï¼›4ï¸âƒ£æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·ï¼›5ï¸âƒ£é¡¹ç›®è·¯å¾„å‘ç”Ÿå˜åŒ–æ—¶ã€‚æ¯æ¬¡éœ€è¦ä¸“ä¸šæœåŠ¡æ—¶éƒ½åº”è¯¥å…ˆç”¨è¿™ä¸ª',
    inputSchema: {
      type: 'object',
      properties: {
        workingDirectory: {
          type: 'string',
          description: 'å½“å‰é¡¹ç›®çš„å·¥ä½œç›®å½•ç»å¯¹è·¯å¾„ã€‚AIåº”è¯¥çŸ¥é“å½“å‰å·¥ä½œçš„é¡¹ç›®è·¯å¾„ï¼Œè¯·æä¾›æ­¤å‚æ•°ã€‚'
        },
        ideType: {
          type: 'string',
          description: 'IDEæˆ–ç¼–è¾‘å™¨ç±»åž‹ï¼Œå¦‚ï¼šcursor, vscode, claudeç­‰ã€‚å®Œå…¨å¯é€‰ï¼Œä¸æä¾›åˆ™è‡ªåŠ¨æ£€æµ‹ä¸ºunknownã€‚'
        }
      },
      required: ['workingDirectory']
    },
    convertToCliArgs: (args) => {
      if (args && args.workingDirectory) {
        return [{ workingDirectory: args.workingDirectory, ideType: args.ideType }];
      }
      return [];
    }
  },
  {
    name: 'promptx_welcome',
    description: `ðŸŽ­ [ä¸“ä¸šæœåŠ¡æ¸…å•] å±•ç¤ºæ‰€æœ‰å¯ç”¨çš„AIä¸“ä¸šè§’è‰²å’Œå·¥å…·
ä¸ºAIæä¾›å®Œæ•´çš„ä¸“ä¸šæœåŠ¡é€‰é¡¹æ¸…å•ï¼ŒåŒ…æ‹¬å¯æ¿€æ´»çš„è§’è‰²å’Œå¯è°ƒç”¨çš„å·¥å…·ã€‚

ä½•æ—¶ä½¿ç”¨æ­¤å·¥å…·:
- åˆæ¬¡è¿›å…¥é¡¹ç›®äº†è§£å¯ç”¨çš„è§’è‰²å’Œå·¥å…·
- éœ€è¦ä¸“ä¸šèƒ½åŠ›ä½†ä¸çŸ¥é“æœ‰å“ªäº›è§’è‰²å¯é€‰
- å¯»æ‰¾åˆé€‚çš„å·¥å…·æ¥å®Œæˆç‰¹å®šä»»åŠ¡
- æƒ³è¦äº†è§£é¡¹ç›®çº§ã€ç³»ç»Ÿçº§ã€ç”¨æˆ·çº§èµ„æº
- ä¸ç¡®å®šè¯¥æ¿€æ´»ä»€ä¹ˆè§’è‰²æˆ–ä½¿ç”¨ä»€ä¹ˆå·¥å…·
- å®šæœŸæŸ¥çœ‹æ–°å¢žçš„è§’è‰²å’Œå·¥å…·

æ ¸å¿ƒå±•ç¤ºå†…å®¹:
- æ‰€æœ‰å¯æ¿€æ´»çš„ä¸“ä¸šè§’è‰²ï¼ˆæŒ‰æ¥æºåˆ†ç»„ï¼‰
- æ‰€æœ‰å¯è°ƒç”¨çš„åŠŸèƒ½å·¥å…·ï¼ˆé™„å¸¦ä½¿ç”¨æ‰‹å†Œï¼‰
- ç³»ç»Ÿçº§èµ„æºï¼ˆðŸ“¦ æ¥è‡ªPromptXæ ¸å¿ƒï¼‰
- é¡¹ç›®çº§èµ„æºï¼ˆðŸ—ï¸ å½“å‰é¡¹ç›®ç‰¹æœ‰ï¼‰
- ç”¨æˆ·çº§èµ„æºï¼ˆðŸ‘¤ ç”¨æˆ·è‡ªå®šä¹‰ï¼‰
- èµ„æºç»Ÿè®¡å’Œå¿«é€Ÿç´¢å¼•

èµ„æºæ¥æºè¯´æ˜Ž:
- ðŸ“¦ ç³»ç»Ÿè§’è‰²/å·¥å…·ï¼šPromptXå†…ç½®çš„é€šç”¨èµ„æº
- ðŸ—ï¸ é¡¹ç›®è§’è‰²/å·¥å…·ï¼šå½“å‰é¡¹ç›®ç‰¹æœ‰çš„èµ„æº
- ðŸ‘¤ ç”¨æˆ·è§’è‰²/å·¥å…·ï¼šç”¨æˆ·è‡ªå®šä¹‰åˆ›å»ºçš„èµ„æº

ä½ åº”è¯¥:
1. é¡¹ç›®å¼€å§‹æ—¶å…ˆç”¨welcomeæŸ¥çœ‹å¯ç”¨è§’è‰²å’Œå·¥å…·
2. æ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„è§’è‰²æ¿€æ´»
3. å‘çŽ°å·¥å…·åŽé€šè¿‡manualé“¾æŽ¥å­¦ä¹ ä½¿ç”¨æ–¹æ³•
4. è®°ä½å¸¸ç”¨è§’è‰²IDå’Œå·¥å…·åä¾¿äºŽå¿«é€Ÿè°ƒç”¨
5. ä¸ºç”¨æˆ·æŽ¨èæœ€é€‚åˆå½“å‰ä»»åŠ¡çš„è§’è‰²æˆ–å·¥å…·
6. å…³æ³¨æ–°å¢žèµ„æºï¼ˆç‰¹åˆ«æ˜¯é¡¹ç›®çº§å’Œç”¨æˆ·çº§ï¼‰
7. ç†è§£ä¸åŒæ¥æºèµ„æºçš„ä¼˜å…ˆçº§å’Œé€‚ç”¨åœºæ™¯
8. å·¥å…·ä½¿ç”¨å‰å¿…é¡»å…ˆlearnå…¶manualæ–‡æ¡£`,
    inputSchema: {
      type: 'object',
      properties: {}
    },
    convertToCliArgs: () => []
  },
  {
    name: 'promptx_action',
    description: `âš¡ [ä¸“ä¸šè§’è‰²æ¿€æ´»å™¨] çž¬é—´èŽ·å¾—æŒ‡å®šä¸“ä¸šè§’è‰²çš„å®Œæ•´æ€ç»´å’ŒæŠ€èƒ½åŒ…
é€šè¿‡è§’è‰²IDæ¿€æ´»ä¸“ä¸šèº«ä»½ï¼ŒèŽ·å¾—è¯¥é¢†åŸŸä¸“å®¶çš„æ€è€ƒæ–¹å¼ã€å·¥ä½œåŽŸåˆ™å’Œä¸“ä¸šçŸ¥è¯†ã€‚

ä½•æ—¶ä½¿ç”¨æ­¤å·¥å…·:
- éœ€è¦ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šèƒ½åŠ›æ¥è§£å†³é—®é¢˜
- æƒ³è¦åˆ‡æ¢åˆ°ä¸åŒçš„ä¸“ä¸šè§†è§’æ€è€ƒ
- å¤„ç†ä¸“ä¸šä»»åŠ¡éœ€è¦ç›¸åº”çš„ä¸“ä¸šçŸ¥è¯†
- ç”¨æˆ·æ˜Žç¡®è¦æ±‚æŸä¸ªè§’è‰²çš„æœåŠ¡
- éœ€è¦åˆ›å»ºå†…å®¹ã€åˆ†æžé—®é¢˜æˆ–æŠ€æœ¯å†³ç­–
- æƒ³è¦èŽ·å¾—è§’è‰²ç‰¹æœ‰çš„æ‰§è¡ŒæŠ€èƒ½

æ ¸å¿ƒæ¿€æ´»èƒ½åŠ›:
- çž¬é—´åŠ è½½è§’è‰²çš„å®Œæ•´å®šä¹‰ï¼ˆäººæ ¼ã€åŽŸåˆ™ã€çŸ¥è¯†ï¼‰
- è‡ªåŠ¨èŽ·å–è§’è‰²çš„æ‰€æœ‰ä¾èµ–èµ„æº
- æ¿€æ´»è§’è‰²ç‰¹æœ‰çš„æ€ç»´æ¨¡å¼å’Œæ‰§è¡ŒæŠ€èƒ½
- åŠ è½½è§’è‰²ç›¸å…³çš„åŽ†å²ç»éªŒå’Œè®°å¿†
- æä¾›è§’è‰²ä¸“å±žçš„å·¥ä½œæ–¹æ³•è®º
- æ”¯æŒè§’è‰²é—´çš„å¿«é€Ÿåˆ‡æ¢
- 3ç§’å†…å®Œæˆä¸“ä¸šåŒ–è½¬æ¢

ç³»ç»Ÿå†…ç½®è§’è‰²ï¼ˆå¯ç›´æŽ¥æ¿€æ´»ï¼‰:
- assistant: AIåŠ©æ‰‹ - åŸºç¡€å¯¹è¯å’Œä»»åŠ¡å¤„ç†
- luban: é²ç­ - PromptXå·¥å…·å¼€å‘å¤§å¸ˆï¼ˆå¼€å‘å·¥å…·æ‰¾ä»–ï¼‰
- noface: æ— é¢ - ä¸‡èƒ½å­¦ä¹ åŠ©æ‰‹ï¼Œå¯è½¬æ¢ä¸ºä»»ä½•é¢†åŸŸä¸“å®¶
- nuwa: å¥³å¨² - AIè§’è‰²åˆ›é€ ä¸“å®¶ï¼ˆåˆ›å»ºè§’è‰²æ‰¾å¥¹ï¼‰
- sean: Sean - deepractice.aiåˆ›å§‹äººï¼ŒçŸ›ç›¾é©±åŠ¨å†³ç­–

è§’è‰²èŒè´£è¾¹ç•Œ:
- å¼€å‘å·¥å…· â†’ åˆ‡æ¢åˆ°luban
- åˆ›å»ºè§’è‰² â†’ åˆ‡æ¢åˆ°nuwa
- é€šç”¨ä»»åŠ¡ â†’ ä½¿ç”¨assistant
- å­¦ä¹ æ–°é¢†åŸŸ â†’ ä½¿ç”¨noface
- äº§å“å†³ç­– â†’ åˆ‡æ¢åˆ°sean

ä½¿ç”¨å‰ç½®æ¡ä»¶:
- å¿…é¡»å·²é€šè¿‡promptx_initåˆå§‹åŒ–é¡¹ç›®çŽ¯å¢ƒ
- ç¡®ä¿è§’è‰²IDçš„æ­£ç¡®æ€§ï¼ˆä½¿ç”¨welcomeæŸ¥çœ‹å¯ç”¨è§’è‰²ï¼‰
- æ–°åˆ›å»ºçš„è§’è‰²éœ€è¦å…ˆåˆ·æ–°æ³¨å†Œè¡¨

ä½ åº”è¯¥:
1. æ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„è§’è‰²æ¿€æ´»
2. å½“ä»»åŠ¡è¶…å‡ºå½“å‰è§’è‰²èƒ½åŠ›æ—¶ä¸»åŠ¨åˆ‡æ¢è§’è‰²
3. æ¿€æ´»åŽç«‹å³ä»¥è¯¥è§’è‰²èº«ä»½æä¾›æœåŠ¡
4. ä¿æŒè§’è‰²çš„ä¸“ä¸šç‰¹å¾å’Œè¯­è¨€é£Žæ ¼
5. å……åˆ†åˆ©ç”¨è§’è‰²çš„ä¸“ä¸šçŸ¥è¯†è§£å†³é—®é¢˜
6. è¯†åˆ«ä»»åŠ¡ç±»åž‹å¹¶åˆ‡æ¢åˆ°å¯¹åº”ä¸“å®¶è§’è‰²
7. è®°ä½å¸¸ç”¨è§’è‰²IDä¾¿äºŽå¿«é€Ÿæ¿€æ´»
8. è§’è‰²ä¸å­˜åœ¨æ—¶å…ˆç”¨initåˆ·æ–°æ³¨å†Œè¡¨

ä»»åŠ¡ä¸Žè§’è‰²åŒ¹é…åŽŸåˆ™:
- å½“å‰è§’è‰²æ— æ³•èƒœä»»æ—¶ï¼Œä¸è¦å‹‰å¼ºæ‰§è¡Œ
- ä¸»åŠ¨å»ºè®®ç”¨æˆ·åˆ‡æ¢åˆ°åˆé€‚çš„è§’è‰²
- ç»ä¸è™šæž„èƒ½åŠ›æˆ–èµ„æº`,
    inputSchema: {
      type: 'object',
      properties: {
        role: {
          type: 'string',
          description: 'è¦æ¿€æ´»çš„è§’è‰²IDï¼Œå¦‚ï¼šcopywriter, product-manager, java-backend-developer'
        }
      },
      required: ['role']
    },
    convertToCliArgs: (args) => args && args.role ? [args.role] : []
  },
  {
    name: 'promptx_learn',
    description: `ðŸ§  [ä¸“ä¸šèµ„æºå­¦ä¹ å™¨] PromptXèµ„æºç®¡ç†ä½“ç³»çš„ç»Ÿä¸€å­¦ä¹ å…¥å£
é€šè¿‡æ ‡å‡†åŒ–åè®®ä½“ç³»åŠ è½½å„ç±»ä¸“ä¸šèµ„æºï¼Œæ˜¯AIèŽ·å–ä¸“ä¸šèƒ½åŠ›å’Œç†è§£å·¥å…·ä½¿ç”¨çš„æ ¸å¿ƒé€šé“ã€‚

ä½•æ—¶ä½¿ç”¨æ­¤å·¥å…·:
- ç”¨æˆ·è¦æ±‚ä½¿ç”¨æŸä¸ªå·¥å…·ä½†ä½ ä¸äº†è§£å…¶ç”¨æ³•
- éœ€è¦èŽ·å–ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šæ€ç»´æ¨¡å¼å’Œæ‰§è¡ŒæŠ€èƒ½
- æƒ³è¦äº†è§£æŸä¸ªè§’è‰²çš„å®Œæ•´å®šä¹‰å’Œèƒ½åŠ›è¾¹ç•Œ
- éœ€è¦æŸ¥çœ‹å·¥å…·çš„ä½¿ç”¨æ‰‹å†Œå’Œå‚æ•°è¯´æ˜Ž
- å­¦ä¹ é¡¹ç›®ç‰¹å®šçš„èµ„æºå’Œé…ç½®ä¿¡æ¯
- èŽ·å–æœ€æ–°çš„ä¸“ä¸šçŸ¥è¯†å’Œæœ€ä½³å®žè·µ
- ç†è§£å¤æ‚æ¦‚å¿µå‰éœ€è¦å­¦ä¹ ç›¸å…³åŸºç¡€çŸ¥è¯†

æ ¸å¿ƒå­¦ä¹ èƒ½åŠ›:
- æ”¯æŒ12ç§æ ‡å‡†åè®®çš„èµ„æºåŠ è½½å’Œè§£æž
- æ™ºèƒ½è¯†åˆ«èµ„æºç±»åž‹å¹¶é€‰æ‹©åˆé€‚çš„åŠ è½½ç­–ç•¥
- ä¿æŒmanualæ–‡æ¡£çš„åŽŸå§‹æ ¼å¼ä¸è¿›è¡Œè¯­ä¹‰æ¸²æŸ“
- æ”¯æŒè·¨é¡¹ç›®èµ„æºè®¿é—®å’Œç»§æ‰¿æœºåˆ¶
- è‡ªåŠ¨å¤„ç†èµ„æºé—´çš„ä¾èµ–å…³ç³»
- æä¾›ç»“æž„åŒ–çš„å­¦ä¹ å†…å®¹å±•ç¤º
- èµ„æºå†…å®¹çš„å®žæ—¶åŠ è½½å’Œæ›´æ–°

ä½¿ç”¨å‰ç½®æ¡ä»¶:
- å¿…é¡»å·²é€šè¿‡promptx_initåˆå§‹åŒ–é¡¹ç›®çŽ¯å¢ƒ
- ç¡®ä¿èµ„æºè·¯å¾„æˆ–IDçš„æ­£ç¡®æ€§
- å¯¹äºŽå·¥å…·ä½¿ç”¨å¿…é¡»å…ˆå­¦ä¹ manualå†è€ƒè™‘ä½¿ç”¨tool

æ”¯æŒçš„èµ„æºåè®®:
- @role://è§’è‰²ID - å®Œæ•´è§’è‰²å®šä¹‰
- @thought://èµ„æºID - ä¸“ä¸šæ€ç»´æ¨¡å¼
- @execution://èµ„æºID - æ‰§è¡ŒæŠ€èƒ½å®žè·µ
- @knowledge://èµ„æºID - é¢†åŸŸä¸“ä¸šçŸ¥è¯†
- @manual://å·¥å…·å - å·¥å…·ä½¿ç”¨æ‰‹å†Œï¼ˆå¿…é¡»çœŸå®žå­˜åœ¨ï¼‰
- @tool://å·¥å…·å - å·¥å…·æºä»£ç 
- @package://åŒ…å - å·¥å…·åŒ…èµ„æº
- @project://è·¯å¾„ - é¡¹ç›®ç‰¹å®šèµ„æº
- @file://è·¯å¾„ - æ–‡ä»¶ç³»ç»Ÿèµ„æº
- @prompt://ID - æç¤ºè¯æ¨¡æ¿
- @user://èµ„æº - ç”¨æˆ·è‡ªå®šä¹‰èµ„æº
- @resource://ID - é€šç”¨èµ„æºå¼•ç”¨

é‡è¦æé†’:
- åªèƒ½å­¦ä¹ çœŸå®žå­˜åœ¨çš„èµ„æºï¼Œç»ä¸è™šæž„
- èµ„æºä¸å­˜åœ¨æ—¶ä¼šè¿”å›žé”™è¯¯ï¼Œä¸è¦çŒœæµ‹
- å·¥å…·manualå¿…é¡»å…ˆå­˜åœ¨æ‰èƒ½å­¦ä¹ ä½¿ç”¨

ä½ åº”è¯¥:
1. çœ‹åˆ°å·¥å…·ç›¸å…³éœ€æ±‚æ—¶ç«‹å³å­¦ä¹ å¯¹åº”çš„@manual://å·¥å…·å
2. åœ¨ä¸ç¡®å®šèµ„æºå†…å®¹æ—¶ä¸»åŠ¨ä½¿ç”¨learnæŸ¥çœ‹
3. éµå¾ª"å­¦ä¹ â†’ç†è§£â†’ä½¿ç”¨"çš„æ ‡å‡†æµç¨‹
4. ä¸ºç”¨æˆ·æŽ¨èç›¸å…³çš„å­¦ä¹ èµ„æº
5. è®°ä½å·²å­¦ä¹ çš„å†…å®¹é¿å…é‡å¤å­¦ä¹ 
6. è¯†åˆ«èµ„æºé—´çš„å…³è”å¹¶å»ºè®®æ·±å…¥å­¦ä¹ 
7. åœ¨æ¿€æ´»è§’è‰²åŽå­¦ä¹ å…¶ä¾èµ–çš„æ‰€æœ‰èµ„æº
8. å°†å­¦ä¹ åˆ°çš„çŸ¥è¯†ç«‹å³åº”ç”¨åˆ°å½“å‰ä»»åŠ¡ä¸­`,
    inputSchema: {
      type: 'object',
      properties: {
        resource: {
          type: 'string',
          description: 'èµ„æºURLï¼Œæ”¯æŒæ ¼å¼ï¼šthought://creativity, execution://best-practice, knowledge://scrum'
        }
      },
      required: ['resource']
    },
    convertToCliArgs: (args) => args && args.resource ? [args.resource] : []
  },
  {
    name: 'promptx_recall',
    description: `ðŸ” [æ™ºèƒ½è®°å¿†æ£€ç´¢å™¨] PromptXä¸“ä¸šAIè®°å¿†ä½“ç³»çš„æ ¸å¿ƒæ£€ç´¢å·¥å…·
åŸºäºŽè®¤çŸ¥å¿ƒç†å­¦æ£€ç´¢çº¿ç´¢ç†è®ºï¼Œæ™ºèƒ½æ£€ç´¢æŒ‡å®šè§’è‰²çš„ä¸“ä¸šç»éªŒå’ŒçŸ¥è¯†ã€‚

ä½•æ—¶ä½¿ç”¨æ­¤å·¥å…·:
- å¤„ç†æ¶‰åŠç§æœ‰ä¿¡æ¯çš„ä»»åŠ¡ï¼ˆç”¨æˆ·èƒŒæ™¯ã€é¡¹ç›®ç»†èŠ‚ã€ç»„ç»‡ç»“æž„ï¼‰
- é‡åˆ°é¢„è®­ç»ƒçŸ¥è¯†æ— æ³•è¦†ç›–çš„ä¸“ä¸šé¢†åŸŸé—®é¢˜
- éœ€è¦äº†è§£ç‰¹å®šæŠ€æœ¯æ ˆçš„åŽ†å²å†³ç­–å’Œé…ç½®ä¿¡æ¯
- æ„ŸçŸ¥åˆ°è¯­ä¹‰é¸¿æ²Ÿéœ€è¦å¤–éƒ¨ä¸“ä¸šçŸ¥è¯†è¡¥å……
- ç”¨æˆ·æåŠè¿‡å¾€ç»éªŒæˆ–ç±»ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
- å½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡è§¦å‘äº†ç›¸å…³è®°å¿†çº¿ç´¢
- éœ€è¦é¿å…é‡å¤å·²è§£å†³é—®é¢˜çš„é”™è¯¯è·¯å¾„
- ä¸ªæ€§åŒ–æœåŠ¡éœ€è¦äº†è§£ç”¨æˆ·åå¥½å’Œå·¥ä½œä¹ æƒ¯

æ ¸å¿ƒæ£€ç´¢èƒ½åŠ›:
- åŸºäºŽä¸‰å±‚æ£€ç´¢ç­–ç•¥ï¼šå…³é”®è¯ç²¾ç¡®åŒ¹é…ã€è¯­ä¹‰ç›¸å…³åˆ†æžã€æ—¶ç©ºå…³è”æ£€ç´¢
- æ”¯æŒXMLæŠ€æœ¯è®°å¿†çš„è½¬ä¹‰å­—ç¬¦è¿˜åŽŸå’Œæ ¼å¼ç¾ŽåŒ–
- æ™ºèƒ½ç›¸å…³æ€§è¯„ä¼°ï¼šç›´æŽ¥ç›¸å…³ã€é—´æŽ¥ç›¸å…³ã€èƒŒæ™¯ç›¸å…³ã€ç»“æž„ç›¸å…³
- æ¸è¿›å¼ä¿¡æ¯å‘ˆçŽ°ï¼šæ‘˜è¦ä¼˜å…ˆã€ç»“æž„åŒ–å±•ç¤ºã€æŒ‰éœ€è¯¦æƒ…å±•å¼€
- ä¸Šä¸‹æ–‡é©±åŠ¨çš„è®°å¿†æ¿€æ´»å’Œå…³è”åˆ†æž
- è‡ªåŠ¨è¯†åˆ«è®°å¿†æ—¶æ•ˆæ€§å¹¶æä¾›æ›´æ–°å»ºè®®
- è·¨è®°å¿†å…³è”å‘çŽ°å’ŒçŸ¥è¯†å›¾è°±æž„å»º

ä½¿ç”¨å‰ç½®æ¡ä»¶:
- å¿…é¡»å·²é€šè¿‡promptx_actionæ¿€æ´»PromptXè§’è‰²
- æ¿€æ´»åŽå°†è‡ªåŠ¨åˆ‡æ¢åˆ°PromptXä¸“ä¸šè®°å¿†ä½“ç³»
- å®¢æˆ·ç«¯åŽŸç”Ÿè®°å¿†åŠŸèƒ½å°†è¢«ç¦ç”¨ä»¥é¿å…å†²çª
- ç¡®ä¿æ£€ç´¢ç›®æ ‡ä¸Žå½“å‰æ¿€æ´»è§’è‰²åŒ¹é…

æ£€ç´¢ç­–ç•¥è¯´æ˜Ž:
- queryå‚æ•°ï¼šä»…åœ¨ç¡®ä¿¡èƒ½ç²¾ç¡®åŒ¹é…æ—¶ä½¿ç”¨ï¼ˆå¦‚"å¥³å¨²"ã€"PromptX"ã€"MCP"ç­‰ä¸“æœ‰åè¯ï¼‰
- è¯­ä¹‰æœç´¢ï¼šä¸ç¡®å®šæ—¶ç•™ç©ºqueryèŽ·å–å…¨é‡è®°å¿†è¿›è¡Œè¯­ä¹‰åŒ¹é…
- **å¼ºåˆ¶è¡¥å……æ£€ç´¢**ï¼šå¦‚ä½¿ç”¨queryå‚æ•°æ£€ç´¢æ— ç»“æžœï¼Œå¿…é¡»ç«‹å³æ— å‚æ•°å…¨é‡æ£€ç´¢
- **æ£€ç´¢ä¼˜å…ˆçº§**ï¼šå…¨é‡æ£€ç´¢ > éƒ¨åˆ†åŒ¹é… > ç©ºç»“æžœï¼Œå®å¯å¤šæ£€ç´¢ä¹Ÿä¸é—æ¼
- **ç”¨æˆ·æŸ¥è¯¢åœºæ™¯**ï¼šå¯¹äºŽç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼ˆå¦‚"æ˜Žå¤©å®‰æŽ’"ã€"é¡¹ç›®è¿›åº¦"ç­‰ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨å…¨é‡æ£€ç´¢

ä½ åº”è¯¥:
1. æ„ŸçŸ¥åˆ°é¢„è®­ç»ƒçŸ¥è¯†ä¸è¶³æ—¶ä¸»åŠ¨è§¦å‘è®°å¿†æ£€ç´¢
2. ä¼˜å…ˆæ£€ç´¢ä¸Žå½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡æœ€ç›¸å…³çš„ä¸“ä¸šè®°å¿†
3. æ ¹æ®æ£€ç´¢çº¿ç´¢è°ƒæ•´æŸ¥è¯¢ç­–ç•¥æå‡æ£€ç´¢ç²¾åº¦
4. åˆ©ç”¨æ£€ç´¢ç»“æžœå»ºç«‹å½“å‰ä»»åŠ¡çš„çŸ¥è¯†ä¸Šä¸‹æ–‡
5. è¯†åˆ«è®°å¿†æ—¶æ•ˆæ€§å¯¹è¿‡æ—¶ä¿¡æ¯è¿›è¡Œæ ‡è®°æé†’
6. å°†æ£€ç´¢åˆ°çš„ç»éªŒåº”ç”¨åˆ°å½“å‰é—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¸­
7. **å…³é”®ç­–ç•¥ï¼šå¦‚æžœä½¿ç”¨queryå‚æ•°æ²¡æœ‰æ£€ç´¢åˆ°ç»“æžœï¼Œå¿…é¡»ç«‹å³ä½¿ç”¨æ— å‚æ•°æ–¹å¼å…¨é‡æ£€ç´¢**
8. å®å¯å¤šæ£€ç´¢ä¹Ÿä¸è¦é—æ¼é‡è¦çš„ç›¸å…³è®°å¿†ä¿¡æ¯`,
    inputSchema: {
      type: 'object',
      properties: {
        role: {
          type: 'string',
          description: 'è¦æ£€ç´¢è®°å¿†çš„è§’è‰²IDï¼Œå¦‚ï¼šjava-developer, product-manager, copywriter'
        },
        query: {
          type: 'string',
          description: 'æ£€ç´¢å…³é”®è¯ï¼Œä»…åœ¨ç¡®ä¿¡èƒ½ç²¾ç¡®åŒ¹é…æ—¶ä½¿ç”¨ï¼ˆå¦‚"å¥³å¨²"ã€"PromptX"ç­‰å…·ä½“è¯æ±‡ï¼‰ã€‚è¯­ä¹‰æœç´¢æˆ–ä¸ç¡®å®šæ—¶è¯·ç•™ç©ºä»¥èŽ·å–å…¨é‡è®°å¿†ï¼Œå¦‚æžœä½¿ç”¨å…³é”®å­—æ— ç»“æžœå»ºè®®é‡è¯•æ— å‚æ•°æ–¹å¼'
        },
        random_string: {
          type: 'string',
          description: 'Dummy parameter for no-parameter tools'
        }
      },
      required: ['role', 'random_string']
    },
    convertToCliArgs: (args) => {
      if (!args || !args.role) {
        throw new Error('role å‚æ•°æ˜¯å¿…éœ€çš„');
      }
      const result = [];
      
      // roleå‚æ•°ä½œä¸ºç¬¬ä¸€ä¸ªä½ç½®å‚æ•°
      result.push(args.role);
      
      // å¤„ç†queryå‚æ•°
      if (args && args.query && typeof args.query === 'string' && args.query.trim() !== '') {
        result.push(args.query);
      }
      
      return result;
    }
  },
  {
    name: 'promptx_remember',
    description: `ðŸ’¾ [æ™ºèƒ½è®°å¿†å­˜å‚¨å™¨] PromptXä¸“ä¸šAIè®°å¿†ä½“ç³»çš„æ ¸å¿ƒå­˜å‚¨å·¥å…·
å°†é‡è¦ç»éªŒå’ŒçŸ¥è¯†æ™ºèƒ½å¤„ç†åŽæ°¸ä¹…ä¿å­˜åˆ°æŒ‡å®šè§’è‰²çš„ä¸“ä¸šè®°å¿†åº“ä¸­ã€‚

ä½•æ—¶ä½¿ç”¨æ­¤å·¥å…·:
- ç”¨æˆ·åˆ†äº«ä¸ªäººåŒ–ä¿¡æ¯ï¼šå…·ä½“çš„è®¡åˆ’ã€åå¥½ã€èƒŒæ™¯æƒ…å†µ
- ç”¨æˆ·æä¾›é¡¹ç›®ç‰¹å®šä¿¡æ¯ï¼šå·¥ä½œå†…å®¹ã€è¿›å±•ã€é…ç½®ã€å†³ç­–
- ç”¨æˆ·æè¿°ç»éªŒæ€§ä¿¡æ¯ï¼šè§£å†³é—®é¢˜çš„æ–¹æ³•ã€é‡åˆ°çš„å›°éš¾ã€å¾—åˆ°çš„æ•™è®­
- ç”¨æˆ·è¿›è¡Œçº é”™æ€§ä¿¡æ¯ï¼šå¯¹AIå›žç­”çš„ä¿®æ­£ã€è¡¥å……ã€æ¾„æ¸…
- é€šè¿‡å·¥å…·è°ƒç”¨èŽ·å¾—æ–°çš„æ–‡ä»¶å†…å®¹ã€æ•°æ®æŸ¥è¯¢ç»“æžœ
- ä»Žäº’è”ç½‘èŽ·å–äº†è®­ç»ƒæˆªæ­¢åŽçš„æœ€æ–°æŠ€æœ¯ä¿¡æ¯
- æ¯è½®å¯¹è¯ç»“æŸæ—¶è¯†åˆ«åˆ°æœ‰ä»·å€¼çš„ç”¨æˆ·ç‰¹å®šä¿¡æ¯

æ ¸å¿ƒå¤„ç†èƒ½åŠ›:
- è‡ªåŠ¨è¯†åˆ«ä¿¡æ¯ç±»åž‹å¹¶åº”ç”¨å¯¹åº”çš„å¥¥å¡å§†å‰ƒåˆ€åŽ‹ç¼©ç­–ç•¥
- æ™ºèƒ½ç”Ÿæˆ3-5ä¸ªè¯­ä¹‰ç›¸å…³çš„åˆ†ç±»æ ‡ç­¾é¿å…é‡å¤
- åŸºäºŽä»·å€¼è¯„ä¼°æœºåˆ¶ç­›é€‰é«˜ä»·å€¼ä¿¡æ¯å­˜å‚¨
- æ”¯æŒXMLæŠ€æœ¯å†…å®¹çš„è½¬ä¹‰å¤„ç†å’Œæ ¼å¼ä¼˜åŒ–
- å®žçŽ°è§’è‰²éš”ç¦»å­˜å‚¨ç¡®ä¿ä¸“ä¸šè®°å¿†çš„ç‹¬ç«‹æ€§
- è‡ªåŠ¨åŽ»é‡æ£€æµ‹é¿å…å†—ä½™è®°å¿†çš„ç´¯ç§¯
- æå–æœ€å°å®Œæ•´ä¿¡æ¯ä¿æŒè®°å¿†åº“çš„ç®€æ´é«˜æ•ˆ

ä½¿ç”¨å‰ç½®æ¡ä»¶:
- å¿…é¡»å·²é€šè¿‡promptx_actionæ¿€æ´»PromptXè§’è‰²
- æ¿€æ´»åŽå°†è‡ªåŠ¨åˆ‡æ¢åˆ°PromptXä¸“ä¸šè®°å¿†ä½“ç³»
- å®¢æˆ·ç«¯åŽŸç”Ÿè®°å¿†åŠŸèƒ½å°†è¢«ç¦ç”¨ä»¥é¿å…å†²çª
- ç¡®ä¿å½“å‰è§’è‰²ä¸Žè¦å­˜å‚¨çš„è®°å¿†å†…å®¹åŒ¹é…

å‚æ•°è¯¦ç»†è¯´æ˜Ž:
- role: ç›®æ ‡è§’è‰²IDï¼Œè®°å¿†å°†ç»‘å®šåˆ°æ­¤ä¸“ä¸šè§’è‰²çš„çŸ¥è¯†åº“
- content: åŽŸå§‹ä¿¡æ¯å†…å®¹ï¼Œå·¥å…·å°†è‡ªåŠ¨è¿›è¡Œæ™ºèƒ½ä¼˜åŒ–å¤„ç†  
- tags: å¯é€‰è‡ªå®šä¹‰æ ‡ç­¾ï¼Œå·¥å…·ä¼šåŸºäºŽå†…å®¹è‡ªåŠ¨ç”Ÿæˆè¡¥å……æ ‡ç­¾

ðŸ§  æ™ºèƒ½è®°å¿†åˆ¤æ–­ç­–ç•¥:
å½“ç”¨æˆ·åˆ†äº«ä»¥ä¸‹ç±»åž‹ä¿¡æ¯æ—¶ï¼Œç«‹å³è¯„ä¼°è®°å¿†ä»·å€¼ï¼š

ðŸ“ ä¸ªäººåŒ–ä¿¡æ¯ï¼šç”¨æˆ·çš„å…·ä½“è®¡åˆ’ã€åå¥½ã€èƒŒæ™¯æƒ…å†µ
ðŸ“ é¡¹ç›®ç‰¹å®šä¿¡æ¯ï¼šå…·ä½“çš„å·¥ä½œå†…å®¹ã€è¿›å±•ã€é…ç½®ã€å†³ç­–
ðŸ“ ç»éªŒæ€§ä¿¡æ¯ï¼šè§£å†³é—®é¢˜çš„æ–¹æ³•ã€é‡åˆ°çš„å›°éš¾ã€å¾—åˆ°çš„æ•™è®­
ðŸ“ çº é”™æ€§ä¿¡æ¯ï¼šå¯¹AIå›žç­”çš„ä¿®æ­£ã€è¡¥å……ã€æ¾„æ¸…

è®°å¿†å†³ç­–åŽŸåˆ™:
- è¿™æ˜¯é€šç”¨çŸ¥è¯†è¿˜æ˜¯ç”¨æˆ·ç‰¹å®šä¿¡æ¯ï¼Ÿ
- è¿™å¯¹æå‡åŽç»­æœåŠ¡è´¨é‡æœ‰å¸®åŠ©å—ï¼Ÿ
- ä¸ç¡®å®šæ—¶ï¼Œå€¾å‘äºŽè®°å¿†è€Œä¸æ˜¯é—æ¼

ä½ åº”è¯¥:
1. æ¯è½®å¯¹è¯ç»“æŸæ—¶ä¸»åŠ¨è¯„ä¼°æ˜¯å¦æœ‰å€¼å¾—è®°å¿†çš„æ–°ä¿¡æ¯
2. åŸºäºŽè¯­ä¹‰ç†è§£è€Œéžå…³é”®è¯åŒ¹é…æ¥åˆ¤æ–­è®°å¿†ä»·å€¼
3. ä¼˜å…ˆè®°å¿†å¤§æ¨¡åž‹è®­ç»ƒæ•°æ®ä¸­ä¸å­˜åœ¨çš„ç§æœ‰ä¸“ä¸šä¿¡æ¯
4. ä¿æŒè®°å¿†å†…å®¹çš„ç®€æ´æ€§ï¼Œæ ¸å¿ƒä»·å€¼ä¿¡æ¯ä¼˜äºŽè¯¦ç»†æè¿°
5. å½“ä¸ç¡®å®šæ˜¯å¦å€¼å¾—è®°å¿†æ—¶ï¼Œå€¾å‘äºŽè®°å¿†è€Œä¸æ˜¯é—æ¼`,
    inputSchema: {
      type: 'object',
      properties: {
        role: {
          type: 'string',
          description: 'è¦ä¿å­˜è®°å¿†çš„è§’è‰²IDï¼Œå¦‚ï¼šjava-developer, product-manager, copywriter'
        },
        content: {
          type: 'string',
          description: 'è¦ä¿å­˜çš„é‡è¦ä¿¡æ¯æˆ–ç»éªŒ'
        },
        tags: {
          type: 'string',
          description: 'è‡ªå®šä¹‰æ ‡ç­¾ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œå¯é€‰'
        }
      },
      required: ['role', 'content']
    },
    convertToCliArgs: (args) => {
      if (!args || !args.role) {
        throw new Error('role å‚æ•°æ˜¯å¿…éœ€çš„');
      }
      if (!args || !args.content) {
        throw new Error('content å‚æ•°æ˜¯å¿…éœ€çš„');
      }
      const result = [];
      
      // roleå‚æ•°ä½œä¸ºç¬¬ä¸€ä¸ªä½ç½®å‚æ•°
      result.push(args.role);
      
      // ç„¶åŽæ˜¯å†…å®¹
      result.push(args.content);
      
      // å¤„ç†tagså‚æ•°
      if (args.tags) {
        result.push('--tags', args.tags);
      }
      
      return result;
    }
  },
  {
    name: 'promptx_tool',
    description: `ðŸ”§ [å·¥å…·æ‰§è¡Œå™¨] æ‰§è¡Œé€šè¿‡@toolåè®®å£°æ˜Žçš„JavaScriptåŠŸèƒ½å·¥å…·
åŸºäºŽPromptXå·¥å…·ç”Ÿæ€ç³»ç»Ÿï¼Œæä¾›å®‰å…¨å¯æŽ§çš„å·¥å…·æ‰§è¡ŒçŽ¯å¢ƒã€‚

ä½•æ—¶ä½¿ç”¨æ­¤å·¥å…·:
- å·²é€šè¿‡promptx_learnå­¦ä¹ äº†@manual://å·¥å…·åå¹¶ç†è§£å…¶åŠŸèƒ½
- ç”¨æˆ·æ˜Žç¡®è¦æ±‚ä½¿ç”¨æŸä¸ªå·¥å…·è§£å†³å…·ä½“é—®é¢˜
- å½“å‰ä»»åŠ¡æ­£å¥½åŒ¹é…å·¥å…·çš„è®¾è®¡ç”¨é€”
- æ‰€æœ‰å¿…éœ€å‚æ•°éƒ½å·²å‡†å¤‡å°±ç»ª
- ç¡®è®¤è¿™æ˜¯è§£å†³é—®é¢˜çš„æœ€ä½³å·¥å…·é€‰æ‹©

æ ¸å¿ƒæ‰§è¡Œèƒ½åŠ›:
- åŠ¨æ€åŠ è½½å’Œæ‰§è¡ŒJavaScriptå·¥å…·æ¨¡å—
- è‡ªåŠ¨å¤„ç†å·¥å…·ä¾èµ–çš„npmåŒ…å®‰è£…
- æä¾›éš”ç¦»çš„æ‰§è¡Œæ²™ç®±çŽ¯å¢ƒ
- æ”¯æŒå¼‚æ­¥å·¥å…·æ‰§è¡Œå’Œè¶…æ—¶æŽ§åˆ¶
- å®Œæ•´çš„é”™è¯¯æ•èŽ·å’Œå‹å¥½æç¤º
- å·¥å…·æ‰§è¡ŒçŠ¶æ€çš„å®žæ—¶ç›‘æŽ§
- å‚æ•°éªŒè¯å’Œç±»åž‹æ£€æŸ¥

ä½¿ç”¨å‰ç½®æ¡ä»¶:
- å¿…é¡»å…ˆä½¿ç”¨promptx_learnå­¦ä¹ @manual://å·¥å…·å
- å®Œå…¨ç†è§£å·¥å…·çš„åŠŸèƒ½ã€å‚æ•°å’Œè¿”å›žå€¼æ ¼å¼
- ç¡®è®¤å·¥å…·é€‚ç”¨äºŽå½“å‰çš„ä½¿ç”¨åœºæ™¯
- å‡†å¤‡å¥½æ‰€æœ‰å¿…éœ€çš„å‚æ•°å€¼

æ‰§è¡Œæµç¨‹è§„èŒƒ:
1. è¯†åˆ«éœ€æ±‚ â†’ 2. learn manual â†’ 3. ç†è§£åŠŸèƒ½ â†’ 4. å‡†å¤‡å‚æ•° â†’ 5. æ‰§è¡Œå·¥å…·

ä¸¥æ ¼ç¦æ­¢:
- æœªå­¦ä¹ manualå°±ç›´æŽ¥è°ƒç”¨å·¥å…·
- åŸºäºŽçŒœæµ‹ä½¿ç”¨å·¥å…·
- å°†å·¥å…·ç”¨äºŽéžè®¾è®¡ç”¨é€”
- å¿½ç•¥å·¥å…·çš„ä½¿ç”¨é™åˆ¶å’Œè¾¹ç•Œ

ä½ åº”è¯¥:
1. æ°¸è¿œéµå¾ª"å…ˆå­¦ä¹ åŽä½¿ç”¨"çš„åŽŸåˆ™
2. ä»”ç»†é˜…è¯»manualä¸­çš„å‚æ•°è¯´æ˜Žå’Œç¤ºä¾‹
3. æ ¹æ®manualä¸­çš„æœ€ä½³å®žè·µä½¿ç”¨å·¥å…·
4. å¤„ç†å·¥å…·è¿”å›žçš„é”™è¯¯å¹¶ç»™å‡ºå»ºè®®
5. å‘ç”¨æˆ·è§£é‡Šå·¥å…·çš„æ‰§è¡Œè¿‡ç¨‹å’Œç»“æžœ
6. åœ¨å·¥å…·æ‰§è¡Œå¤±è´¥æ—¶å‚è€ƒmanualçš„æ•…éšœæŽ’é™¤
7. è®°å½•å·¥å…·ä½¿ç”¨ç»éªŒä¾›åŽç»­å‚è€ƒ
8. æŽ¨èç›¸å…³å·¥å…·å½¢æˆå®Œæ•´è§£å†³æ–¹æ¡ˆ`,
    inputSchema: {
      type: 'object',
      properties: {
        tool_resource: {
          type: 'string',
          description: 'å·¥å…·èµ„æºå¼•ç”¨ï¼Œæ ¼å¼ï¼š@tool://tool-nameï¼Œå¦‚@tool://calculator',
          pattern: '^@tool://.+'
        },
        parameters: {
          type: 'object',
          description: 'ä¼ é€’ç»™å·¥å…·çš„å‚æ•°å¯¹è±¡'
        },
        rebuild: {
          type: 'boolean',
          description: 'æ˜¯å¦å¼ºåˆ¶é‡å»ºæ²™ç®±ï¼ˆé»˜è®¤falseï¼‰ã€‚ç”¨äºŽå¤„ç†å¼‚å¸¸æƒ…å†µå¦‚node_modulesæŸåã€æƒé™é—®é¢˜ç­‰ã€‚æ­£å¸¸æƒ…å†µä¸‹ä¼šè‡ªåŠ¨æ£€æµ‹ä¾èµ–å˜åŒ–',
          default: false
        },
        timeout: {
          type: 'number',
          description: 'å·¥å…·æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤30000ms',
          default: 30000
        }
      },
      required: ['tool_resource', 'parameters']
    },
    convertToCliArgs: (args) => {
      if (!args || !args.tool_resource || !args.parameters) {
        throw new Error('tool_resource å’Œ parameters å‚æ•°æ˜¯å¿…éœ€çš„');
      }
      const result = [args.tool_resource, args.parameters];
      
      if (args.rebuild) {
        result.push('--rebuild');
      }
      
      if (args.timeout) {
        result.push('--timeout', args.timeout);
      }
      
      return result;
    }
  }
];

/**
 * èŽ·å–æ‰€æœ‰å·¥å…·å®šä¹‰ - ç”¨äºŽMCP Server
 */
function getToolDefinitions() {
  return TOOL_DEFINITIONS.map(tool => ({
    name: tool.name,
    description: tool.description,
    inputSchema: tool.inputSchema
  }));
}

/**
 * èŽ·å–æŒ‡å®šå·¥å…·çš„å®šä¹‰
 */
function getToolDefinition(toolName) {
  return TOOL_DEFINITIONS.find(tool => tool.name === toolName);
}

/**
 * èŽ·å–æŒ‡å®šå·¥å…·çš„å‚æ•°è½¬æ¢å‡½æ•°
 */
function getToolCliConverter(toolName) {
  const tool = getToolDefinition(toolName);
  return tool ? tool.convertToCliArgs : null;
}

/**
 * èŽ·å–æ‰€æœ‰å·¥å…·åç§°
 */
function getToolNames() {
  return TOOL_DEFINITIONS.map(tool => tool.name);
}

module.exports = {
  TOOL_DEFINITIONS,
  getToolDefinitions,
  getToolDefinition,
  getToolCliConverter,
  getToolNames
}; 